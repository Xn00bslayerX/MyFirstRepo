<!DOCTYPE HTML>
<html>

<head>
   <title>Products</title>
   <link rel="stylesheet" href="styles.css" type="text/css">
</head>

<body>
   <div id="navbar"></div>
   <script>
      fetch('navbar.html')
         .then(response => response.text())
         .then(data => {
            document.getElementById('navbar').innerHTML = data;
         });
   </script>

   <section id="concern" class="card">
      <h1>Browse by Concern</h1>
      <!-- Should fetch API data here -->
      <a href="example.com">Example concern from API</a>
   </section>
   <section id="product" class="card">
      <h1>Browse by Product</h1>
      <!-- Should fetch API data here -->
      <a href="example.com">Example product from API</a>
   </section>

   <div class="card-container"></div>
<!-- Work in progress to show working API data before implementing additional functionality -->
   <script>
      const server = "https://makeup-api.herokuapp.com/api/v1/products.json";
      async function getAndLoadAPIdata() {
         let response = await fetch(server);
         let data = await response.json();
         console.log("Data from API: ", data);
         let result = '';

         result = '<table>';

data.forEach(element => {
  result += `
    <tr>
      <td><img src="${element.image_link}" alt="Product Image"></td>
      <td><a href="${element.product_link}">${element.name}</a></td>
      <td>${element.category}</td>
      <td>${element.description}</td>
      <td>${element.price_sign}${element.price} ${element.currency}</td>
      <td>`;

  element.product_colors.forEach(color => {
    result += `<p style="color:${color.hex_value}">${color.colour_name}</p>`;
  });

  result += `
      </td>
    </tr>`;
});

result += '</table>';

// Now you can use the 'result' variable to display the table.

         ;
      // Select the card container element
      const cardContainer = document.querySelector('.card-container');
      cardContainer.innerHTML = result;
}
      // Call the function to fetch and load the API data
      getAndLoadAPIdata();
   </script>

</body>

</html>
